<final full script from canvas goes here>